.card-panel {

	padding:       1rem 0.5rem 0.5rem;
	margin-bottom: 1rem;
	overflow:      hidden;

	@include media-breakpoint-up(sm) {
		padding: 1rem;
	}

	&.card-panel-contained{
		@extend .container;
	}

	&.card-panel-inverse{

		color: rgba(255,255,255,.75);

		.card-panel-title{
			color: #FFF;
		}

		.card-panel-header {
			a, a:hover, a:focus {
				color: #FFFFFF;
			}
		}
	}

	&.cards-backed {
		.card {

			@include media-breakpoint-up(sm){
				border-width: 0 ($grid-gutter-width/2) 0 ($grid-gutter-width/2);
				border-style: solid;
				border-color: #fff;
			}

			@extend .card-backed;
		}

		.card-panel-body {

			.card-panel-grid,
			.card-panel-single,
			.card-panel-list {
				padding: 0;
			}

		}
	}

	&.cards-header-split {
		.card {
			@extend .card-header-split ;
		}
	}

	&.cards-centered {
		.card {
			@extend .card-centered;
		}
	}

	@each $name, $color in $brand-colors-light {
		&.cards-backed-#{$name} {
			.card {
				@extend .card-backed-#{$name};
			}
		}

		&.card-panel-#{$name} {
			background-color: $color;

			&.cards-backed .card{
				border-color: $color;
			}

			.card-panel-full{

				& > div.expanded{
					width: calc(100% + #{$grid-gutter-width});
				}
				&:first-child{
					& >div{
						&.expanded{
							margin-top: -1rem;
							margin-left: -1rem;
							margin-right: -1rem;
						}
					}
				}
				&:last-child{
					& >div{
						&.expanded{
							margin-right: -1rem;
							margin-left: -1rem;
							margin-bottom: -0.5rem;
						}
					}
				}

				@include media-breakpoint-up(sm) {
					&:last-child{
						& >div{
							&.expanded{
								margin-bottom: -1rem;
							}
						}
					}
				}

				@include media-breakpoint-up(md) {
					& > div.expanded{
					}
					&:first-child{
						& >div{
							&.expanded{
								margin-right: 0;
								margin-top: -1rem;
								margin-bottom: -1rem;
							}
						}
					}
					&:last-child{
						& >div{
							&.expanded{
								margin-left: 0;
								margin-top: -1rem;
								margin-bottom: -1rem;
							}
						}
					}
				}
			}
		}

	}
	@each $name, $color in $brand-colors-dark {
		&.cards-backed-#{$name} {
			.card {
				@extend .card-backed-#{$name};
			}
		}

		&.card-panel-#{$name} {
			background-color: $color;

			@extend .card-panel-inverse;

			&.cards-backed .card{
				border-color: $color;
			}
		}
	}


	.card-panel-body {
		@extend .container;
		padding: 0;

		display:   flex;
		flex-wrap: wrap;

		& > .card{
			margin-top: 1rem;
			&:nth-child(1),&:nth-child(2){
				margin-top: 0;
			}
			@include media-breakpoint-up(lg) {
				&:nth-child(3),&:nth-child(4){
					margin-top: 0;
				}
			}
		}
		.card {

			@include media-breakpoint-up(sm) {
				@include make-col();
				@include make-col-span(6);
				&:nth-child(odd){
					clear:left;
				}
			}

			@include media-breakpoint-up(lg) {
				@include make-col-span(3);
				&:nth-child(odd){
					clear:none;
				}
				&:nth-child(4n+1){
					clear:left;
				}
			}
		}

		.card-panel-full,
		.card-panel-grid,
		.card-panel-single,
		.card-panel-list {

			overflow:      hidden;
			margin-bottom: 1rem;

			&:last-child {
				margin-bottom: 0;
			}
			@include media-breakpoint-up(md) {
				@include make-col();
				@include make-col-span(6);
				margin-bottom: 0;
			}
		}

		.card-panel-full{
			overflow: visible;
			padding: 0;
			display: flex;
			width: 100%;
			position: relative;

			& > div{
				background-position: center center;
				background-size: cover;
				width:100%;
				padding-top: 100%;

				&.video-launcher {
					cursor: pointer;
					&:after {
						content: $kf-play-circle;
						font-family: $font-family-kentfont;
						position: absolute;
						left: 50%;
						top: 50%;
						margin-left: -3.1rem;
						margin-top: -5rem;
						font-size: 7rem;
						color: rgba(255,255,255,0.9);
					}
				}
			}

			@include media-breakpoint-up(md) {
				@include make-col-span(6);
				margin-bottom: 0;
				& > div{
					width: calc(100% + #{$grid-gutter-width/2});
				}

				&:first-child{
					& >div{
						margin-right: ($grid-gutter-width/2);
					}
				}
				&:last-child{
					& >div{
						margin-left: ($grid-gutter-width/2);
					}
				}

			}

		}

		.card-panel-single {
			.card {
				.card-title{
					font-size: $font-size-h5;
				}
				@include media-breakpoint-up(sm) {
					padding: 0;
					width:   100%;
				}
				@include media-breakpoint-up(lg) {
					padding: 0;
					width:   100%;
				}
				&.card-backed {
					padding: 1rem 1rem 0;
				}
			}
		}
		.card-panel-grid {
			padding: 0;
			.card {
				@include make-col();
				@include make-col-span(6);
				&:nth-child(odd) {
					clear: left;
				}
			}
		}
		.card-panel-list {
			.card {
				@include make-col();
				@include media-breakpoint-up(sm) {
					padding: 0;
					width:   100%;
				}
				@include media-breakpoint-up(lg) {
					padding: 0;
					width:   100%;
				}

				.card-img-top,
				.card-img:first-child,
				img:first-child{
					float:        left;
					max-width:    40%;
					margin-right: 1rem;
				}

				&.card-backed{
					padding: 1rem 1rem 0;
					.card-img-top,
					.card-img:first-child,
					img:first-child{
						margin-left: 0;
						margin-bottom: 1rem;
					}
				}
			}
		}
	}

	.card-panel-header {
		@extend .container;
		@extend .form-inline;

		margin-bottom: 1rem;
		margin-top:    -1rem;

		& > * {
			margin-top:    1rem;
			margin-bottom: 0rem;
		}

		.card-panel-title {
			font-size:      $font-size-h3;
			display:        block;
			margin:         1rem 1rem 0rem 0;

			vertical-align: middle;

			@include media-breakpoint-up(md) {
				display: inline-block;
			}
		}

		.card-panel-filter {

			display:        inline-block;

			margin-bottom:  0rem;
			vertical-align: middle;
			margin-right:   1rem;

			input, select, button {
				min-width: 6rem;
				max-width: 14rem;
			}
			select {
				@extend .form-control;
				@extend .c-select;
			}
			input {
				@extend .form-control;
			}
		}

		.card-panel-social {
			display:        inline-block;
			vertical-align: middle;

			&.right {
				float: right;
			}
			&.left {
				float: left;
			}

			@extend .content-social;

		}

		nav {
			display:        inline-block;
			vertical-align: middle;
			@extend .form-control-static;

			a {
				margin-left: 1rem;
			}

		}
	}

	a.card, .card a {
		&,&:hover,&:focus {
			p.card-text {
				color: $body-color;
			}
		}
	}
	a.card.card-inverse, .card.card-inverse a {
		&,&:hover,&:focus {
			p.card-text {
				color: rgba(255,255,255,.75);
			}
		}
	}

}
